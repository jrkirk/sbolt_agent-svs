pushd ./topchef-soar
source all_source.soar
popd

pushd ./verb-execution
source all_source.soar
popd

pushd ./interaction
source all_source.soar
popd

pushd ./objects
source objects_source.soar
popd

source default.soar
source preferences.soar


sp {propose*init-agent
   (state <s> -^name
   	      ^superstate nil)
-->
   (<s> ^operator <op> + >)
   (<op> ^name init-agent)
}

sp {apply*init-agent
   (state <s> ^operator.name init-agent)
-->
   (<s> ^topstate <s>)
}

## Elaborate a state as non-atomic/atomic if the operator proposed in superstate in non-atomic/atomic

sp {elaborate*atomicity
   (state <s> ^superstate.operator <sop>)
   (<sop> ^kind <atom>)
-->
   (<s> ^kind <atom>)
}



## The wait operator which gets selected when an action is executing 
sp {top-state*propose*wait
    (state <s> ^choices none ^kind non-atomic)
   -{ (<s> ^operator <o*1>)
      (<o*1> ^name wait)}
    -->
    (<s> ^operator <q> + >)
    (<q> ^name wait +)
}